var Vue3ErrorMonitor=function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t),i=n(r);function a(e){return e?e instanceof Error?{message:e.message||"Unknown error",name:e.name||"Error",stack:e.stack||""}:"string"==typeof e?{message:e,name:"Error",stack:""}:"object"==typeof e?{message:e.message||String(e),name:e.name||"Error",stack:e.stack||""}:{message:String(e),name:"Error",stack:""}:{message:"Unknown error",name:"Error",stack:""}}function s(e){const{name:t,message:r,stack:n}=e,o=(n.split("\n")[1]||"").match(/at\s+(.+):(\d+):(\d+)/),i=o?`${o[1]}:${o[2]}`:"";return function(e){let t=0;if(0===e.length)return t.toString(36);for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return Math.abs(t).toString(36)}([t,r.substring(0,100),i].filter(Boolean).join("|"))}class c{constructor(e,t,r,n){this.errorCount=new Map,this.app=e,this.reportService=t,this.sourceMapService=r,this.config=n,this.errorCountResetInterval=window.setInterval((()=>{this.errorCount.clear()}),6e4),this.app.config.globalProperties.$errorMonitor=this,this.init()}init(){this.config.captureGlobalErrors&&this.setupGlobalErrorHandler(),this.config.capturePromiseErrors&&this.setupPromiseErrorHandler(),this.config.captureAjaxErrors&&this.setupAjaxErrorHandler(),this.config.captureResourceErrors&&this.setupResourceErrorHandler()}setupGlobalErrorHandler(){window.addEventListener("error",(e=>(e.error&&!this.isResourceError(e)&&this.handleJsError(e.error,{filename:e.filename,lineno:e.lineno,colno:e.colno,message:e.message}),!0)),!0)}setupPromiseErrorHandler(){window.addEventListener("unhandledrejection",(e=>{const t=e.reason instanceof Error?e.reason:new Error(String(e.reason));this.handleJsError(t,{type:"unhandledrejection",message:String(e.reason)})}))}setupAjaxErrorHandler(){const e=XMLHttpRequest.prototype.open,t=XMLHttpRequest.prototype.send,r=window.fetch,n=this;XMLHttpRequest.prototype.open=function(t,r,n=!0,o,i){return this._url=r,this._method=t,e.apply(this,[t,r,n,o,i])},XMLHttpRequest.prototype.send=function(...e){return this.addEventListener("error",(function(){n.handleNetworkError(new Error(`XHR Error: ${this._url}`),{url:this._url,method:this._method,status:this.status,statusText:this.statusText})})),this.addEventListener("timeout",(function(){n.handleNetworkError(new Error(`XHR Timeout: ${this._url}`),{url:this._url,method:this._method,timeout:this.timeout})})),t.apply(this,e)},window.fetch=function(...e){var t;const o="string"==typeof e[0]?e[0]:e[0].url,i=(null===(t=e[1])||void 0===t?void 0:t.method)||"GET";return r.apply(window,e).catch((e=>{throw n.handleNetworkError(e,{url:o,method:i}),e}))}}setupResourceErrorHandler(){window.addEventListener("error",(e=>{if(this.isResourceError(e)){const t=e.target,r=t.tagName.toLowerCase();this.handleResourceError(new Error(`Failed to load ${r}`),{tagName:r,src:t.src||t.href,type:t.getAttribute("type"),id:t.id,className:t.className})}return!0}),!0)}isResourceError(e){const t=e.target;return t instanceof HTMLElement&&("IMG"===t.tagName||"SCRIPT"===t.tagName||"LINK"===t.tagName||"AUDIO"===t.tagName||"VIDEO"===t.tagName)}handleJsError(e,t={}){this.shouldIgnoreError(e)||this.isRateLimited(e)||this.processAndReportError(e,{type:"js_error",...t})}handleComponentError(e,t,r){if(this.shouldIgnoreError(e))return;if(this.isRateLimited(e))return;const n=t?t.$options.name||"AnonymousComponent":"Unknown";this.processAndReportError(e,{type:"vue_error",componentName:n,lifecycleHook:r,componentData:t?this.sanitizeComponentData(t.$data):null})}handleNetworkError(e,t={}){this.shouldIgnoreError(e)||this.isRateLimited(e)||this.processAndReportError(e,{type:"network_error",...t})}handleResourceError(e,t={}){this.shouldIgnoreError(e)||this.isRateLimited(e)||this.processAndReportError(e,{type:"resource_error",...t})}async processAndReportError(e,t={}){const r=a(e),n=s(r);let o=r.stack;if(this.sourceMapService.isEnabled())try{o=await this.sourceMapService.mapStackTrace(r.stack)}catch(e){console.error("Failed to map stack trace:",e)}const i={errorId:n,message:r.message,stack:o,type:t.type||"unknown",url:window.location.href,userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),context:t};this.reportService.reportError(i)}shouldIgnoreError(e){if(!e)return!0;const t=e.message||"";return(this.config.ignoreErrors||[]).some((e=>e instanceof RegExp?e.test(t):t.includes(e)))}isRateLimited(e){const t=s(a(e)),r=(this.errorCount.get(t)||0)+1;return this.errorCount.set(t,r),r>this.config.maxErrorsPerMinute}sanitizeComponentData(e){if(!e)return null;try{return JSON.parse(JSON.stringify(e))}catch(t){return Object.keys(e).reduce(((t,r)=>{const n=e[r];return t[r]="object"==typeof n?"[Complex Object]":n,t}),{})}}destroy(){clearInterval(this.errorCountResetInterval)}}class u{constructor(e,t){this.metricsInterval=null,this.frameRateInterval=null,this.longTaskObserver=null,this.resourceObserver=null,this.reportService=e,this.config=t,this.init()}init(){this.config.capturePageLoad&&this.capturePageLoadMetrics(),this.config.capturePaint&&this.capturePaintMetrics(),this.config.captureMemory&&this.startMemoryMonitoring(),this.config.captureFrameRate&&this.startFrameRateMonitoring(),this.config.resourceTiming&&this.observeResourceTiming(),this.observeLongTasks(),this.captureWebVitals()}capturePageLoadMetrics(){window.addEventListener("load",(()=>{setTimeout((()=>{const e=window.performance.timing,t=e.loadEventEnd-e.navigationStart,r=e.domainLookupEnd-e.domainLookupStart,n=e.connectEnd-e.connectStart,o=e.responseStart-e.requestStart,i=e.domContentLoadedEventEnd-e.navigationStart,a=e.domInteractive-e.navigationStart;this.reportService.reportPerformance({type:"page_load",metrics:{pageLoadTime:t,dnsTime:r,tcpTime:n,ttfb:o,domReadyTime:i,domInteractive:a},url:window.location.href,timestamp:(new Date).toISOString()})}),0)}))}capturePaintMetrics(){new PerformanceObserver((e=>{e.getEntries().forEach((e=>{"first-paint"!==e.name&&"first-contentful-paint"!==e.name||this.reportService.reportPerformance({type:"paint",metrics:{name:e.name,startTime:e.startTime},url:window.location.href,timestamp:(new Date).toISOString()})}))})).observe({entryTypes:["paint"]})}startMemoryMonitoring(){performance&&performance.memory&&(this.metricsInterval=window.setInterval((()=>{const e=performance.memory;this.reportService.reportPerformance({type:"memory",metrics:{jsHeapSizeLimit:e.jsHeapSizeLimit,totalJSHeapSize:e.totalJSHeapSize,usedJSHeapSize:e.usedJSHeapSize},url:window.location.href,timestamp:(new Date).toISOString()})}),3e4))}startFrameRateMonitoring(){let e=performance.now(),t=0;const r=()=>{const n=performance.now(),o=n-e;if(o>=1e3){const r=Math.round(1e3*t/o);this.reportService.reportPerformance({type:"fps",metrics:{fps:r},url:window.location.href,timestamp:(new Date).toISOString()}),t=0,e=n}t++,requestAnimationFrame(r)};requestAnimationFrame(r)}observeResourceTiming(){this.resourceObserver=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{["script","link","img","css","fetch","xmlhttprequest"].includes(e.initiatorType)&&this.reportService.reportPerformance({type:"resource",metrics:{name:e.name,initiatorType:e.initiatorType,duration:e.duration,transferSize:e.transferSize||0,decodedBodySize:e.decodedBodySize||0},url:window.location.href,timestamp:(new Date).toISOString()})}))})),this.resourceObserver.observe({entryTypes:["resource"]})}observeLongTasks(){"PerformanceLongTaskTiming"in window&&(this.longTaskObserver=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{e.duration>this.config.longTaskThreshold&&this.reportService.reportPerformance({type:"long_task",metrics:{duration:e.duration,startTime:e.startTime},url:window.location.href,timestamp:(new Date).toISOString()})}))})),this.longTaskObserver.observe({entryTypes:["longtask"]}))}captureWebVitals(){this.config.captureFirstContentfulPaint&&this.captureFCP(),this.config.captureLargestContentfulPaint&&this.captureLCP(),this.config.captureFirstInputDelay&&this.captureFID(),this.config.captureCumulativeLayoutShift&&this.captureCLS()}captureFCP(){const e=new PerformanceObserver((t=>{t.getEntries().forEach((e=>{this.reportService.reportPerformance({type:"web_vital",name:"FCP",metrics:{value:e.startTime,rating:this.getRating("FCP",e.startTime)},url:window.location.href,timestamp:(new Date).toISOString()})})),e.disconnect()}));e.observe({type:"paint",buffered:!0})}captureLCP(){let e=null;const t=new PerformanceObserver((t=>{const r=t.getEntries();e=r[r.length-1]}));t.observe({type:"largest-contentful-paint",buffered:!0}),window.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&e&&(this.reportService.reportPerformance({type:"web_vital",name:"LCP",metrics:{value:e.startTime,rating:this.getRating("LCP",e.startTime),element:e.element?e.element.tagName:null},url:window.location.href,timestamp:(new Date).toISOString()}),t.disconnect())}))}captureFID(){new PerformanceObserver((e=>{e.getEntries().forEach((e=>{this.reportService.reportPerformance({type:"web_vital",name:"FID",metrics:{value:e.processingStart-e.startTime,rating:this.getRating("FID",e.processingStart-e.startTime)},url:window.location.href,timestamp:(new Date).toISOString()})}))})).observe({type:"first-input",buffered:!0})}captureCLS(){let e=0,t=[];new PerformanceObserver((r=>{r.getEntries().forEach((r=>{r.hadRecentInput||(e+=r.value,t.push(r))}))})).observe({type:"layout-shift",buffered:!0}),window.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.reportService.reportPerformance({type:"web_vital",name:"CLS",metrics:{value:e,rating:this.getRating("CLS",e),entries:t.length},url:window.location.href,timestamp:(new Date).toISOString()})}))}getRating(e,t){switch(e){case"FCP":return t<=1800?"good":t<=3e3?"needs-improvement":"poor";case"LCP":return t<=2500?"good":t<=4e3?"needs-improvement":"poor";case"FID":return t<=100?"good":t<=300?"needs-improvement":"poor";case"CLS":return t<=.1?"good":t<=.25?"needs-improvement":"poor";default:return"needs-improvement"}}destroy(){this.metricsInterval&&clearInterval(this.metricsInterval),this.frameRateInterval&&clearInterval(this.frameRateInterval),this.longTaskObserver&&this.longTaskObserver.disconnect(),this.resourceObserver&&this.resourceObserver.disconnect()}}class l{constructor(e,t,r,n){this.routeStartTime=0,this.currentRoute="",this.router=e,this.reportService=t,this.traceManager=r,this.config=n,this.init()}init(){this.router.beforeEach(((e,t,r)=>{this.routeStartTime=performance.now();const n=this.traceManager.generateTraceId();this.traceManager.setTraceId(n),this.currentRoute=e.fullPath,this.reportRouteChange("route_start",e,t),r()})),this.router.afterEach(((e,t)=>{const r=performance.now()-this.routeStartTime;this.reportRouteChange("route_complete",e,t,r)})),this.router.onError((e=>{this.reportService.reportError({type:"route_error",message:e.message,stack:e.stack,url:window.location.href,route:this.currentRoute,traceId:this.traceManager.getTraceId(),timestamp:(new Date).toISOString()})}))}reportRouteChange(e,t,r,n){if(this.config.ignorePaths&&this.config.ignorePaths.some((e=>t.path.includes(e))))return;const o={type:e,from:this.sanitizeRouteData(r),to:this.sanitizeRouteData(t),timestamp:(new Date).toISOString(),traceId:this.traceManager.getTraceId()};void 0!==n&&(o.duration=n),this.reportService.reportPerformance(o)}sanitizeRouteData(e){if(!e)return null;const t={path:e.path,name:e.name};return this.config.captureParams&&(t.params=e.params),this.config.captureQuery&&(t.query=e.query),this.config.captureHash&&(t.hash=e.hash),t}}class h{constructor(e,t){this.stateSnapshotInterval=null,this.reportService=e,this.config=t,this.init()}init(){this.config.vuex&&this.config.captureState&&this.setupVuexMonitoring(),this.config.pinia&&this.config.captureState&&this.setupPiniaMonitoring(),this.config.stateSnapshotInterval>0&&this.startStateSnapshotCapture()}setupVuexMonitoring(){const e=this.config.vuex;this.config.captureActions&&e.subscribeAction({before:e=>{this.reportStateChange("vuex_action_before",e.type,e.payload)},after:e=>{this.reportStateChange("vuex_action_after",e.type,e.payload)},error:(e,t)=>{this.reportStateError("vuex_action_error",e.type,t)}}),this.config.captureMutations&&e.subscribe((e=>{this.reportStateChange("vuex_mutation",e.type,e.payload)}))}setupPiniaMonitoring(){this.config.pinia.use((({store:e})=>{this.config.captureActions&&e.$onAction((({name:t,args:r,after:n,onError:o})=>{this.reportStateChange("pinia_action_before",`${e.$id}/${t}`,r[0]),n((r=>{this.reportStateChange("pinia_action_after",`${e.$id}/${t}`,r)})),o((r=>{this.reportStateError("pinia_action_error",`${e.$id}/${t}`,r)}))})),this.config.captureMutations&&e.$subscribe((t=>{this.reportStateChange("pinia_state_change",e.$id,{type:t.type,events:t.events})}))}))}startStateSnapshotCapture(){this.stateSnapshotInterval=window.setInterval((()=>{let e={};if(this.config.vuex&&(e.vuex=this.sanitizeState(this.config.vuex.state)),this.config.pinia){e.pinia={};Object.keys(this.config.pinia.state.value).forEach((t=>{e.pinia[t]=this.sanitizeState(this.config.pinia.state.value[t])}))}this.reportService.reportPerformance({type:"state_snapshot",state:e,timestamp:(new Date).toISOString()})}),this.config.stateSnapshotInterval)}reportStateChange(e,t,r){this.reportService.reportPerformance({type:e,action:t,payload:this.sanitizePayload(r),timestamp:(new Date).toISOString()})}reportStateError(e,t,r){this.reportService.reportError({type:e,action:t,message:r.message,stack:r.stack,timestamp:(new Date).toISOString()})}sanitizeState(e){if(!e)return null;try{const t=JSON.stringify(e);return t.length>this.config.maxStateSize?{_truncated:!0,_size:t.length,_keys:Object.keys(e)}:JSON.parse(t)}catch(t){return{_error:"Cannot serialize state",_keys:Object.keys(e)}}}sanitizePayload(e){if(!e)return null;try{return JSON.parse(JSON.stringify(e))}catch(t){return{_error:"Cannot serialize payload",_type:typeof e}}}destroy(){this.stateSnapshotInterval&&clearInterval(this.stateSnapshotInterval)}}class p{constructor(e){this.queue=[],this.sending=!1,this.batchInterval=null,this.offlineQueue=[],this.isOnline=navigator.onLine,this.config=e,this.init()}init(){this.config.batchReport&&(this.batchInterval=window.setInterval((()=>{this.processBatch()}),this.config.batchInterval)),window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),window.addEventListener("beforeunload",this.handleBeforeUnload.bind(this))}reportError(e){if(Math.random()>(this.config.sampleRate||1))return;if("error"===this.config.reportLevel&&"error"!==e.level)return;const t={id:this.generateId(),data:{...e,appId:this.config.appId,appVersion:this.config.appVersion,environment:this.config.environment,category:"error"},timestamp:Date.now(),retryCount:0};if(this.config.beforeReport){const e=this.config.beforeReport(t.data);if(!1===e)return;e&&(t.data=e)}this.sendToIntegrations(t.data),this.config.batchReport?(this.queue.push(t),this.queue.length>=this.config.batchSize&&this.processBatch()):this.sendReport(t)}reportPerformance(e){if(Math.random()>(this.config.sampleRate||1))return;const t={id:this.generateId(),data:{...e,appId:this.config.appId,appVersion:this.config.appVersion,environment:this.config.environment,category:"performance"},timestamp:Date.now(),retryCount:0};if(this.config.beforeReport){const e=this.config.beforeReport(t.data);if(!1===e)return;e&&(t.data=e)}this.config.batchReport?this.queue.push(t):this.sendReport(t)}processBatch(){if(this.sending||0===this.queue.length)return;this.sending=!0;const e=this.queue.splice(0,this.config.batchSize);if(!this.isOnline)return this.offlineQueue.push(...e),void(this.sending=!1);this.sendBatchReport(e).catch((()=>{e.forEach((e=>{e.retryCount++,e.retryCount<=this.config.maxRetryCount&&this.queue.unshift(e)}))})).finally((()=>{this.sending=!1,this.queue.length>0&&setTimeout((()=>this.processBatch()),0)}))}async sendBatchReport(e){try{const t=await fetch(this.config.endpoint,{method:"POST",headers:{"Content-Type":"application/json",...this.config.headers},body:JSON.stringify({batch:e.map((e=>e.data)),timestamp:Date.now()}),keepalive:!0});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`)}catch(e){throw console.error("Error sending batch report:",e),e}}async sendReport(e){if(this.isOnline)try{if(this.config.useBeacon&&navigator.sendBeacon){const t=new Blob([JSON.stringify(e.data)],{type:"application/json"});if(navigator.sendBeacon(this.config.endpoint,t))return}const t=await fetch(this.config.endpoint,{method:"POST",headers:{"Content-Type":"application/json",...this.config.headers},body:JSON.stringify(e.data),keepalive:!0});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`)}catch(t){console.error("Error sending report:",t),e.retryCount++,e.retryCount<=this.config.maxRetryCount&&setTimeout((()=>{this.sendReport(e)}),this.config.retryInterval)}else this.offlineQueue.push(e)}handleOnline(){if(this.isOnline=!0,this.offlineQueue.length>0){const e=[...this.offlineQueue];this.offlineQueue=[],this.config.batchReport?(this.queue.unshift(...e),this.processBatch()):e.forEach((e=>this.sendReport(e)))}}handleOffline(){this.isOnline=!1}handleBeforeUnload(){if(this.batchInterval&&clearInterval(this.batchInterval),this.queue.length>0&&this.isOnline&&navigator.sendBeacon&&this.config.useBeacon){const e=new Blob([JSON.stringify({batch:this.queue.map((e=>e.data)),timestamp:Date.now()})],{type:"application/json"});navigator.sendBeacon(this.config.endpoint,e)}}sendToIntegrations(e){var t,r,n;const o=this.config.integrations;if(o){if((null===(t=o.sentry)||void 0===t?void 0:t.enabled)&&window.Sentry)try{window.Sentry.captureException(e.error||new Error(e.message),{extra:e})}catch(e){console.error("Failed to send to Sentry:",e)}if((null===(r=o.logRocket)||void 0===r?void 0:r.enabled)&&window.LogRocket)try{window.LogRocket.captureException(e.error||new Error(e.message),{extra:e})}catch(e){console.error("Failed to send to LogRocket:",e)}if((null===(n=o.aliyunSls)||void 0===n?void 0:n.enabled)&&window.AliyunSLS)try{window.AliyunSLS.send({project:o.aliyunSls.project,logstore:o.aliyunSls.logstore,time:Math.floor(Date.now()/1e3),contents:this.flattenObject(e)})}catch(e){console.error("Failed to send to Aliyun SLS:",e)}}}flattenObject(e,t=""){const r={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n],i=t?`${t}.${n}`:n;"object"==typeof o&&null!==o?Object.assign(r,this.flattenObject(o,i)):r[i]=String(o)}return r}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}destroy(){this.batchInterval&&clearInterval(this.batchInterval),window.removeEventListener("online",this.handleOnline.bind(this)),window.removeEventListener("offline",this.handleOffline.bind(this)),window.removeEventListener("beforeunload",this.handleBeforeUnload.bind(this))}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var f,g={exports:{}},d={exports:{}};function m(){return f||(f=1,d.exports=function(e){var t=/(^|@)\S+:\d+/,r=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(r)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),n=r.match(/ (\(.+\)$)/);r=n?r.replace(n[0],""):r;var o=this.extractLocation(n?n[1]:r),i=n&&r||void 0,a=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new e({functionName:i,fileName:a,lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(r),o=n&&n[1]?n[1]:void 0,i=this.extractLocation(t.replace(r,""));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),o=[],i=2,a=n.length;i<a;i+=2){var s=r.exec(n[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:n[i]}))}return o},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),o=[],i=0,a=n.length;i<a;i+=2){var s=r.exec(n[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:n[i]}))}return o},parseOpera11:function(r){return r.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var r,n=t.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i.match(/\(([^)]*)\)/)&&(r=i.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)}}}(o.default)),d.exports}var v,w={exports:{}},y={},S={};function b(){return v||(v=1,function(e){e.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,r=/^data:.+\,.+$/;function n(e){var r=e.match(t);return r?{scheme:r[1],auth:r[2],host:r[3],port:r[4],path:r[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function i(t){var r=t,i=n(t);if(i){if(!i.path)return t;r=i.path}for(var a,s=e.isAbsolute(r),c=r.split(/\/+/),u=0,l=c.length-1;l>=0;l--)"."===(a=c[l])?c.splice(l,1):".."===a?u++:u>0&&(""===a?(c.splice(l+1,u),u=0):(c.splice(l,2),u--));return""===(r=c.join("/"))&&(r=s?"/":"."),i?(i.path=r,o(i)):r}e.urlParse=n,e.urlGenerate=o,e.normalize=i,e.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var a=n(t),s=n(e);if(s&&(e=s.path||"/"),a&&!a.scheme)return s&&(a.scheme=s.scheme),o(a);if(a||t.match(r))return t;if(s&&!s.host&&!s.path)return s.host=t,o(s);var c="/"===t.charAt(0)?t:i(e.replace(/\/+$/,"")+"/"+t);return s?(s.path=c,o(s)):c},e.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(t)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};var a=!("__proto__"in Object.create(null));function s(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function u(e,t){return e===t?0:e>t?1:-1}e.toSetString=a?s:function(e){return c(e)?"$"+e:e},e.fromSetString=a?s:function(e){return c(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,r){var n=e.source-t.source;return 0!==n||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)||r||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=e.generatedLine-t.generatedLine)?n:e.name-t.name},e.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=e.source-t.source)||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:e.name-t.name},e.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=u(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:u(e.name,t.name)}}(S)),S}var E,_={};function C(){return E||(E=1,function(e){function t(r,n,o,i,a,s){var c=Math.floor((n-r)/2)+r,u=a(o,i[c],!0);return 0===u?c:u>0?n-c>1?t(c,n,o,i,a,s):s==e.LEAST_UPPER_BOUND?n<i.length?n:-1:c:c-r>1?t(r,c,o,i,a,s):s==e.LEAST_UPPER_BOUND?c:r<0?-1:r}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(r,n,o,i){if(0===n.length)return-1;var a=t(-1,n.length,r,n,o,i||e.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&0===o(n[a],n[a-1],!0);)--a;return a}}(_)),_}var O,L={};var I,R,A={},M={};function P(){if(I)return M;I=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return M.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},M.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1},M}var T,k,N,x,D={};function j(){if(T)return D;function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(r,n,o,i){if(o<i){var a=o-1;e(r,(l=o,h=i,Math.round(l+Math.random()*(h-l))),i);for(var s=r[i],c=o;c<i;c++)n(r[c],s)<=0&&e(r,a+=1,c);e(r,a+1,c);var u=a+1;t(r,n,o,u-1),t(r,n,u+1,i)}var l,h}return T=1,D.quickSort=function(e,r){t(e,r,0,e.length-1)},D}function F(){if(k)return y;k=1;var e=b(),t=C(),r=function(){if(O)return L;O=1;var e=b(),t=Object.prototype.hasOwnProperty;function r(){this._array=[],this._set=Object.create(null)}return r.fromArray=function(e,t){for(var n=new r,o=0,i=e.length;o<i;o++)n.add(e[o],t);return n},r.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(r,n){var o=e.toSetString(r),i=t.call(this._set,o),a=this._array.length;i&&!n||this._array.push(r),i||(this._set[o]=a)},r.prototype.has=function(r){var n=e.toSetString(r);return t.call(this._set,n)},r.prototype.indexOf=function(r){var n=e.toSetString(r);if(t.call(this._set,n))return this._set[n];throw new Error('"'+r+'" is not in the set.')},r.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},r.prototype.toArray=function(){return this._array.slice()},L.ArraySet=r,L}().ArraySet,n=function(){if(R)return A;R=1;var e=P();return A.encode=function(t){var r,n="",o=function(e){return e<0?1+(-e<<1):0+(e<<1)}(t);do{r=31&o,(o>>>=5)>0&&(r|=32),n+=e.encode(r)}while(o>0);return n},A.decode=function(t,r,n){var o,i,a,s,c=t.length,u=0,l=0;do{if(r>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(i=e.decode(t.charCodeAt(r++))))throw new Error("Invalid base64 digit: "+t.charAt(r-1));o=!!(32&i),u+=(i&=31)<<l,l+=5}while(o);n.value=(s=(a=u)>>1,1&~a?s:-s),n.rest=r},A}(),o=j().quickSort;function i(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new c(t):new a(t)}function a(t){var n=t;"string"==typeof t&&(n=JSON.parse(t.replace(/^\)\]\}'/,"")));var o=e.getArg(n,"version"),i=e.getArg(n,"sources"),a=e.getArg(n,"names",[]),s=e.getArg(n,"sourceRoot",null),c=e.getArg(n,"sourcesContent",null),u=e.getArg(n,"mappings"),l=e.getArg(n,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);i=i.map(String).map(e.normalize).map((function(t){return s&&e.isAbsolute(s)&&e.isAbsolute(t)?e.relative(s,t):t})),this._names=r.fromArray(a.map(String),!0),this._sources=r.fromArray(i,!0),this.sourceRoot=s,this.sourcesContent=c,this._mappings=u,this.file=l}function s(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function c(t){var n=t;"string"==typeof t&&(n=JSON.parse(t.replace(/^\)\]\}'/,"")));var o=e.getArg(n,"version"),a=e.getArg(n,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new r,this._names=new r;var s={line:-1,column:0};this._sections=a.map((function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var r=e.getArg(t,"offset"),n=e.getArg(r,"line"),o=e.getArg(r,"column");if(n<s.line||n===s.line&&o<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=r,{generatedOffset:{generatedLine:n+1,generatedColumn:o+1},consumer:new i(e.getArg(t,"map"))}}))}return i.fromSourceMap=function(e){return a.fromSourceMap(e)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},i.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(t,r,n){var o,a=r||null;switch(n||i.GENERATED_ORDER){case i.GENERATED_ORDER:o=this._generatedMappings;break;case i.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map((function(t){var r=null===t.source?null:this._sources.at(t.source);return null!=r&&null!=s&&(r=e.join(s,r)),{source:r,generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}}),this).forEach(t,a)},i.prototype.allGeneratedPositionsFor=function(r){var n=e.getArg(r,"line"),o={source:e.getArg(r,"source"),originalLine:n,originalColumn:e.getArg(r,"column",0)};if(null!=this.sourceRoot&&(o.source=e.relative(this.sourceRoot,o.source)),!this._sources.has(o.source))return[];o.source=this._sources.indexOf(o.source);var i=[],a=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(a>=0){var s=this._originalMappings[a];if(void 0===r.column)for(var c=s.originalLine;s&&s.originalLine===c;)i.push({line:e.getArg(s,"generatedLine",null),column:e.getArg(s,"generatedColumn",null),lastColumn:e.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a];else for(var u=s.originalColumn;s&&s.originalLine===n&&s.originalColumn==u;)i.push({line:e.getArg(s,"generatedLine",null),column:e.getArg(s,"generatedColumn",null),lastColumn:e.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a]}return i},y.SourceMapConsumer=i,a.prototype=Object.create(i.prototype),a.prototype.consumer=i,a.fromSourceMap=function(t){var n=Object.create(a.prototype),i=n._names=r.fromArray(t._names.toArray(),!0),c=n._sources=r.fromArray(t._sources.toArray(),!0);n.sourceRoot=t._sourceRoot,n.sourcesContent=t._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=t._file;for(var u=t._mappings.toArray().slice(),l=n.__generatedMappings=[],h=n.__originalMappings=[],p=0,f=u.length;p<f;p++){var g=u[p],d=new s;d.generatedLine=g.generatedLine,d.generatedColumn=g.generatedColumn,g.source&&(d.source=c.indexOf(g.source),d.originalLine=g.originalLine,d.originalColumn=g.originalColumn,g.name&&(d.name=i.indexOf(g.name)),h.push(d)),l.push(d)}return o(n.__originalMappings,e.compareByOriginalPositions),n},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map((function(t){return null!=this.sourceRoot?e.join(this.sourceRoot,t):t}),this)}}),a.prototype._parseMappings=function(t,r){for(var i,a,c,u,l,h=1,p=0,f=0,g=0,d=0,m=0,v=t.length,w=0,y={},S={},b=[],E=[];w<v;)if(";"===t.charAt(w))h++,w++,p=0;else if(","===t.charAt(w))w++;else{for((i=new s).generatedLine=h,u=w;u<v&&!this._charIsMappingSeparator(t,u);u++);if(c=y[a=t.slice(w,u)])w+=a.length;else{for(c=[];w<u;)n.decode(t,w,S),l=S.value,w=S.rest,c.push(l);if(2===c.length)throw new Error("Found a source, but no line and column");if(3===c.length)throw new Error("Found a source and line, but no column");y[a]=c}i.generatedColumn=p+c[0],p=i.generatedColumn,c.length>1&&(i.source=d+c[1],d+=c[1],i.originalLine=f+c[2],f=i.originalLine,i.originalLine+=1,i.originalColumn=g+c[3],g=i.originalColumn,c.length>4&&(i.name=m+c[4],m+=c[4])),E.push(i),"number"==typeof i.originalLine&&b.push(i)}o(E,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=E,o(b,e.compareByOriginalPositions),this.__originalMappings=b},a.prototype._findMapping=function(e,r,n,o,i,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return t.search(e,r,i,a)},a.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(t){var r={generatedLine:e.getArg(t,"line"),generatedColumn:e.getArg(t,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(t,"bias",i.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===r.generatedLine){var a=e.getArg(o,"source",null);null!==a&&(a=this._sources.at(a),null!=this.sourceRoot&&(a=e.join(this.sourceRoot,a)));var s=e.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:a,line:e.getArg(o,"originalLine",null),column:e.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},a.prototype.sourceContentFor=function(t,r){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(t=e.relative(this.sourceRoot,t)),this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];var n;if(null!=this.sourceRoot&&(n=e.urlParse(this.sourceRoot))){var o=t.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!n.path||"/"==n.path)&&this._sources.has("/"+t))return this.sourcesContent[this._sources.indexOf("/"+t)]}if(r)return null;throw new Error('"'+t+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(t){var r=e.getArg(t,"source");if(null!=this.sourceRoot&&(r=e.relative(this.sourceRoot,r)),!this._sources.has(r))return{line:null,column:null,lastColumn:null};var n={source:r=this._sources.indexOf(r),originalLine:e.getArg(t,"line"),originalColumn:e.getArg(t,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(t,"bias",i.GREATEST_LOWER_BOUND));if(o>=0){var a=this._originalMappings[o];if(a.source===n.source)return{line:e.getArg(a,"generatedLine",null),column:e.getArg(a,"generatedColumn",null),lastColumn:e.getArg(a,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},y.BasicSourceMapConsumer=a,c.prototype=Object.create(i.prototype),c.prototype.constructor=i,c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),c.prototype.originalPositionFor=function(r){var n={generatedLine:e.getArg(r,"line"),generatedColumn:e.getArg(r,"column")},o=t.search(n,this._sections,(function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn})),i=this._sections[o];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:r.bias}):{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},c.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(-1!==n.consumer.sources.indexOf(e.getArg(t,"source"))){var o=n.consumer.generatedPositionFor(t);if(o)return{line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},c.prototype._parseMappings=function(t,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],a=i.consumer._generatedMappings,s=0;s<a.length;s++){var c=a[s],u=i.consumer._sources.at(c.source);null!==i.consumer.sourceRoot&&(u=e.join(i.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var l=i.consumer._names.at(c.name);this._names.add(l),l=this._names.indexOf(l);var h={source:u,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:l};this.__generatedMappings.push(h),"number"==typeof h.originalLine&&this.__originalMappings.push(h)}o(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),o(this.__originalMappings,e.compareByOriginalPositions)},y.IndexedSourceMapConsumer=c,y}function $(){return N||(N=1,w.exports=function(e,t){function r(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.open("get",e),n.onerror=r,n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300||"file://"===e.substr(0,7)&&n.responseText?t(n.responseText):r(new Error("HTTP status: "+n.status+" retrieving "+e)))},n.send()}))}function n(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(e,t){for(var r=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],n=e.split("\n"),o="",i=Math.min(t,20),a=0;a<i;++a){var s=n[t-a-1],c=s.indexOf("//");if(c>=0&&(s=s.substr(0,c)),s){o=s+o;for(var u=r.length,l=0;l<u;l++){var h=r[l].exec(o);if(h&&h[1])return h[1]}}}}function a(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function s(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function c(e){for(var t,r,n=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;r=n.exec(e);)t=r[1];if(t)return t;throw new Error("sourceMappingURL not found")}function u(e,r,n){return new Promise((function(o,i){var a=r.originalPositionFor({line:e.lineNumber,column:e.columnNumber});if(a.source){var s=r.sourceContentFor(a.source);s&&(n[a.source]=s),o(new t({functionName:a.name||e.functionName,args:e.args,fileName:a.source,lineNumber:a.line,columnNumber:a.column}))}else i(new Error("Could not get original source for given stackframe and source map"))}))}return function l(h){if(!(this instanceof l))return new l(h);h=h||{},this.sourceCache=h.sourceCache||{},this.sourceMapConsumerCache=h.sourceMapConsumerCache||{},this.ajax=h.ajax||r,this._atob=h.atob||n,this._get=function(e){return new Promise(function(t,r){var n="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(h.offline&&!n)r(new Error("Cannot make network requests in offline mode"));else if(n){var o=/^data:application\/json;([\w=:"-]+;)*base64,/,i=e.match(o);if(i){var a=i[0].length,s=e.substr(a),c=this._atob(s);this.sourceCache[e]=c,t(c)}else r(new Error("The encoding of the inline sourcemap is not supported"))}else{var u=this.ajax(e,{method:"get"});this.sourceCache[e]=u,u.then(t,r)}}.bind(this))},this._getSourceMapConsumer=function(t,r){return new Promise(function(n){if(this.sourceMapConsumerCache[t])n(this.sourceMapConsumerCache[t]);else{var i=new Promise(function(n,i){return this._get(t).then((function(t){"string"==typeof t&&(t=o(t.replace(/^\)\]\}'/,""))),void 0===t.sourceRoot&&(t.sourceRoot=r),n(new e.SourceMapConsumer(t))})).catch(i)}.bind(this));this.sourceMapConsumerCache[t]=i,n(i)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,r){this.getMappedLocation(e).then(function(e){function r(){t(e)}this.findFunctionName(e).then(t,r).catch(r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(r,n){s(e),this._get(e.fileName).then((function(n){var o=e.lineNumber,a=e.columnNumber,s=i(n,o);r(s?new t({functionName:s,args:e.args,fileName:e.fileName,lineNumber:o,columnNumber:a}):e)}),n).catch(n)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,r){a(),s(e);var n=this.sourceCache,o=e.fileName;this._get(o).then(function(r){var i=c(r),a="data:"===i.substr(0,5),s=o.substring(0,o.lastIndexOf("/")+1);return"/"===i[0]||a||/^https?:\/\/|^\/\//i.test(i)||(i=s+i),this._getSourceMapConsumer(i,s).then((function(r){return u(e,r,n).then(t).catch((function(){t(e)}))}))}.bind(this),r).catch(r)}.bind(this))}}}(F(),o.default)),w.exports}g.exports=function(e,t,r){var n={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},o=function(){try{throw new Error}catch(e){return e}};function i(e,t){var r={};return[e,t].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r})),r}function a(e){return e.stack||e["opera#sourceloc"]}function s(e,t){return"function"==typeof t?e.filter(t):e}return{get:function(e){var t=o();return a(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(r){r=i(n,r);var c=o();return s(a(c)?e.parse(c):t.backtrace(r),r.filter)},fromError:function(t,o){o=i(n,o);var a=new r(o);return new Promise(function(r){var n=s(e.parse(t),o.filter);r(Promise.all(n.map((function(e){return new Promise((function(t){function r(){t(e)}a.pinpoint(e).then(t,r).catch(r)}))}))))}.bind(this))},generateArtificially:function(e){e=i(n,e);var r=t.backtrace(e);return"function"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,t,r,n){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var o=function(){try{return this.get().then(t,r).catch(r),e.apply(n||this,arguments)}catch(e){throw a(e)&&this.fromError(e).then(t,r).catch(r),e}}.bind(this);return o.__stacktraceOriginalFn=e,o},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,r,n){return new Promise((function(o,i){var a=new XMLHttpRequest;if(a.onerror=i,a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<400?o(a.responseText):i(new Error("POST to "+t+" failed with status: "+a.status)))},a.open("post",t),a.setRequestHeader("Content-Type","application/json"),n&&"object"==typeof n.headers){var s=n.headers;for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.setRequestHeader(c,s[c])}var u={stack:e};null!=r&&(u.message=r),a.send(JSON.stringify(u))}))}}}(m(),i.default,$());class U{constructor(e){this.config=e}isEnabled(){return this.config.enabled}async mapStackTrace(e){if(!this.isEnabled())return e;try{const t=await g.exports.fromError(new Error(e));return t.map((e=>{let t=e.fileName||"";return this.config.stripProjectRoot&&t.startsWith(this.config.stripProjectRoot)&&(t=t.substring(this.config.stripProjectRoot.length)),`    at ${e.functionName||"(anonymous)"} (${t}:${e.lineNumber}:${e.columnNumber})`})).join("\n")}catch(t){return console.error("Error mapping stack trace:",t),e}}async uploadSourceMap(e,t){if(!this.isEnabled()||!this.config.uploadSourceMap||!this.config.sourceMapEndpoint)return!1;try{const r=new FormData;if(r.append("sourceMap",e),r.append("sourceFile",t),this.config.includeSourceContent){const t=await this.readFileAsText(e);r.append("sourceContent",t)}return(await fetch(this.config.sourceMapEndpoint,{method:"POST",body:r})).ok}catch(e){return console.error("Error uploading source map:",e),!1}}readFileAsText(e){return new Promise(((t,r)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=r,n.readAsText(e)}))}}class B{constructor(e){this.errorCount=0,this.errorTimestamps=[],this.config=e,this.init()}init(){window.addEventListener("error",this.handleError.bind(this)),window.addEventListener("unhandledrejection",this.handleError.bind(this))}handleError(e){console.log(e);const t=Date.now();this.errorTimestamps.push(t),this.errorTimestamps=this.errorTimestamps.filter((e=>t-e<=this.config.timeWindow)),this.errorCount=this.errorTimestamps.length,this.errorCount>=this.config.errorThreshold&&this.redirectToFallback()}redirectToFallback(){window.location.pathname!==this.config.fallbackUrl&&(sessionStorage.setItem("errorMonitor_previousUrl",window.location.href),window.location.href=this.config.fallbackUrl)}destroy(){window.removeEventListener("error",this.handleError.bind(this)),window.removeEventListener("unhandledrejection",this.handleError.bind(this))}}class z{constructor(e,t){this.checkInterval=null,this.hasReported=!1,this.reportService=e,this.config=t,this.init()}init(){"complete"===document.readyState?this.startDetection():window.addEventListener("load",(()=>{this.startDetection()}))}startDetection(){setTimeout((()=>{this.checkForWhiteScreen()}),this.config.timeout),this.config.checkInterval>0&&(this.checkInterval=window.setInterval((()=>{this.checkForWhiteScreen()}),this.config.checkInterval))}checkForWhiteScreen(){if(this.hasReported)return void this.stopDetection();this.isPageWhiteScreen()&&(this.reportWhiteScreen(),this.hasReported=!0,this.stopDetection())}isPageWhiteScreen(){let e=0;for(const t of this.config.validSelectors)e+=document.querySelectorAll(t).length;return e<this.config.minValidElements}reportWhiteScreen(){const e={url:window.location.href,userAgent:navigator.userAgent,screenWidth:window.screen.width,screenHeight:window.screen.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight,domContentLoaded:performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart,loadTime:performance.timing.loadEventEnd-performance.timing.navigationStart,htmlContent:this.getSafeHtmlSnapshot()};this.reportService.reportError({type:"white_screen",message:"White screen detected",pageInfo:e,timestamp:(new Date).toISOString()})}getSafeHtmlSnapshot(){try{const e=document.documentElement.outerHTML,t=5e3;return e.length>t?e.substring(0,t)+"...":e}catch(e){return"Failed to capture HTML snapshot"}}stopDetection(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}destroy(){this.stopDetection()}}var H=new Uint8Array(16);function G(){if(!x&&!(x="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(H)}var q=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function J(e){return"string"==typeof e&&q.test(e)}for(var V=[],W=0;W<256;++W)V.push((W+256).toString(16).substr(1));function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(V[e[t+0]]+V[e[t+1]]+V[e[t+2]]+V[e[t+3]]+"-"+V[e[t+4]]+V[e[t+5]]+"-"+V[e[t+6]]+V[e[t+7]]+"-"+V[e[t+8]]+V[e[t+9]]+"-"+V[e[t+10]]+V[e[t+11]]+V[e[t+12]]+V[e[t+13]]+V[e[t+14]]+V[e[t+15]]).toLowerCase();if(!J(r))throw TypeError("Stringified UUID is invalid");return r}function X(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=function(e){if(!J(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var s=0;s<16;++s)o[i+s]=a[s];return o}return Q(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function Z(e){return 14+(e+64>>>9<<4)+1}function Y(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function K(e,t,r,n,o,i){return Y((a=Y(Y(t,e),Y(n,i)))<<(s=o)|a>>>32-s,r);var a,s}function ee(e,t,r,n,o,i,a){return K(t&r|~t&n,e,t,o,i,a)}function te(e,t,r,n,o,i,a){return K(t&n|r&~n,e,t,o,i,a)}function re(e,t,r,n,o,i,a){return K(t^r^n,e,t,o,i,a)}function ne(e,t,r,n,o,i,a){return K(r^(t|~n),e,t,o,i,a)}function oe(e,t,r){var n=(e=e||{}).random||(e.rng||G)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return Q(n)}function ie(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function ae(e,t){return e<<t|e>>>32-t}X("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var i=e[o>>5]>>>o%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[Z(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=r,c=n,u=o,l=i;r=ee(r,n,o,i,e[a],7,-680876936),i=ee(i,r,n,o,e[a+1],12,-389564586),o=ee(o,i,r,n,e[a+2],17,606105819),n=ee(n,o,i,r,e[a+3],22,-1044525330),r=ee(r,n,o,i,e[a+4],7,-176418897),i=ee(i,r,n,o,e[a+5],12,1200080426),o=ee(o,i,r,n,e[a+6],17,-1473231341),n=ee(n,o,i,r,e[a+7],22,-45705983),r=ee(r,n,o,i,e[a+8],7,1770035416),i=ee(i,r,n,o,e[a+9],12,-1958414417),o=ee(o,i,r,n,e[a+10],17,-42063),n=ee(n,o,i,r,e[a+11],22,-1990404162),r=ee(r,n,o,i,e[a+12],7,1804603682),i=ee(i,r,n,o,e[a+13],12,-40341101),o=ee(o,i,r,n,e[a+14],17,-1502002290),r=te(r,n=ee(n,o,i,r,e[a+15],22,1236535329),o,i,e[a+1],5,-165796510),i=te(i,r,n,o,e[a+6],9,-1069501632),o=te(o,i,r,n,e[a+11],14,643717713),n=te(n,o,i,r,e[a],20,-373897302),r=te(r,n,o,i,e[a+5],5,-701558691),i=te(i,r,n,o,e[a+10],9,38016083),o=te(o,i,r,n,e[a+15],14,-660478335),n=te(n,o,i,r,e[a+4],20,-405537848),r=te(r,n,o,i,e[a+9],5,568446438),i=te(i,r,n,o,e[a+14],9,-1019803690),o=te(o,i,r,n,e[a+3],14,-187363961),n=te(n,o,i,r,e[a+8],20,1163531501),r=te(r,n,o,i,e[a+13],5,-1444681467),i=te(i,r,n,o,e[a+2],9,-51403784),o=te(o,i,r,n,e[a+7],14,1735328473),r=re(r,n=te(n,o,i,r,e[a+12],20,-1926607734),o,i,e[a+5],4,-378558),i=re(i,r,n,o,e[a+8],11,-2022574463),o=re(o,i,r,n,e[a+11],16,1839030562),n=re(n,o,i,r,e[a+14],23,-35309556),r=re(r,n,o,i,e[a+1],4,-1530992060),i=re(i,r,n,o,e[a+4],11,1272893353),o=re(o,i,r,n,e[a+7],16,-155497632),n=re(n,o,i,r,e[a+10],23,-1094730640),r=re(r,n,o,i,e[a+13],4,681279174),i=re(i,r,n,o,e[a],11,-358537222),o=re(o,i,r,n,e[a+3],16,-722521979),n=re(n,o,i,r,e[a+6],23,76029189),r=re(r,n,o,i,e[a+9],4,-640364487),i=re(i,r,n,o,e[a+12],11,-421815835),o=re(o,i,r,n,e[a+15],16,530742520),r=ne(r,n=re(n,o,i,r,e[a+2],23,-995338651),o,i,e[a],6,-198630844),i=ne(i,r,n,o,e[a+7],10,1126891415),o=ne(o,i,r,n,e[a+14],15,-1416354905),n=ne(n,o,i,r,e[a+5],21,-57434055),r=ne(r,n,o,i,e[a+12],6,1700485571),i=ne(i,r,n,o,e[a+3],10,-1894986606),o=ne(o,i,r,n,e[a+10],15,-1051523),n=ne(n,o,i,r,e[a+1],21,-2054922799),r=ne(r,n,o,i,e[a+8],6,1873313359),i=ne(i,r,n,o,e[a+15],10,-30611744),o=ne(o,i,r,n,e[a+6],15,-1560198380),n=ne(n,o,i,r,e[a+13],21,1309151649),r=ne(r,n,o,i,e[a+4],6,-145523070),i=ne(i,r,n,o,e[a+11],10,-1120210379),o=ne(o,i,r,n,e[a+2],15,718787259),n=ne(n,o,i,r,e[a+9],21,-343485551),r=Y(r,s),n=Y(n,c),o=Y(o,u),i=Y(i,l)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(Z(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),X("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<a;++h){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[h][f];for(var g=16;g<80;++g)p[g]=ae(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var d=r[0],m=r[1],v=r[2],w=r[3],y=r[4],S=0;S<80;++S){var b=Math.floor(S/20),E=ae(d,5)+ie(b,m,v,w)+y+t[b]+p[S]>>>0;y=w,w=v,v=ae(m,30)>>>0,m=d,d=E}r[0]=r[0]+d>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+y>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));class se{constructor(){this.traceId="",this.sessionId="",this.pageLoadId="",this.init()}init(){this.sessionId=this.getOrCreateSessionId(),this.pageLoadId=this.generateTraceId(),this.traceId=this.pageLoadId,window.addEventListener("beforeunload",(()=>{this.saveSessionData()}))}getOrCreateSessionId(){let e=sessionStorage.getItem("errorMonitor_sessionId");return e||(e=oe(),sessionStorage.setItem("errorMonitor_sessionId",e)),e}saveSessionData(){sessionStorage.setItem("errorMonitor_sessionId",this.sessionId),sessionStorage.setItem("errorMonitor_lastActive",Date.now().toString())}generateTraceId(){return oe()}getTraceId(){return this.traceId}setTraceId(e){this.traceId=e}getSessionId(){return this.sessionId}getPageLoadId(){return this.pageLoadId}getTraceInfo(){return{traceId:this.traceId,sessionId:this.sessionId,pageLoadId:this.pageLoadId}}}const ce={reportConfig:{endpoint:"/api/error-report",appId:"",appVersion:"1.0.0",environment:"production",maxRetryCount:3,retryInterval:3e3,batchReport:!0,batchSize:10,batchInterval:5e3,useBeacon:!0,reportLevel:"error",sampleRate:1},errorConfig:{ignoreErrors:[/^Network Error$/i,/^Script error\.?$/i],captureGlobalErrors:!0,capturePromiseErrors:!0,captureAjaxErrors:!0,captureConsoleErrors:!0,captureResourceErrors:!0,maxErrorsPerMinute:30},performanceConfig:{capturePageLoad:!0,capturePaint:!0,captureMemory:!0,captureFrameRate:!1,captureFirstContentfulPaint:!0,captureLargestContentfulPaint:!0,captureFirstInputDelay:!0,captureCumulativeLayoutShift:!0,resourceTiming:!0,longTaskThreshold:50},whiteScreenConfig:{enabled:!0,timeout:5e3,minValidElements:5,validSelectors:["div","p","img","button","a"],checkInterval:1e3},fallbackConfig:{enabled:!0,fallbackUrl:"/error",errorThreshold:3,timeWindow:6e4},routeConfig:{enabled:!1,captureParams:!1,captureQuery:!0,captureHash:!1},stateConfig:{enabled:!1,captureActions:!0,captureMutations:!0,captureState:!0,stateSnapshotInterval:3e4,maxStateSize:1e5},sourceMapConfig:{enabled:!0,uploadSourceMap:!1,stripProjectRoot:"",includeSourceContent:!1},debug:!1};var ue={install(e,t={}){const r={...ce,...t},n=new se;e.provide("traceManager",n);const o=new p(r.reportConfig);e.provide("reportService",o);const i=new U(r.sourceMapConfig);e.provide("sourceMapService",i);const a=new c(e,o,i,r.errorConfig);e.provide("errorMonitor",a);const s=new u(o,r.performanceConfig);if(e.provide("performanceMonitor",s),r.whiteScreenConfig.enabled){const t=new z(o,r.whiteScreenConfig);e.provide("whiteScreenDetector",t)}if(r.fallbackConfig.enabled){const t=new B(r.fallbackConfig);e.provide("fallbackService",t)}if(r.routeConfig.enabled&&r.routeConfig.router){const t=new l(r.routeConfig.router,o,n,r.routeConfig);e.provide("routeMonitor",t)}if(r.stateConfig.enabled){const t=new h(o,r.stateConfig);e.provide("stateMonitor",t)}e.component("ErrorBoundary",{}),e.mixin({errorCaptured:(e,t,r)=>(a.handleComponentError(e,t,r),!1)})}};return e.ErrorMonitor=c,e.PerformanceMonitor=u,e.ReportService=p,e.RouteMonitor=l,e.StateMonitor=h,e.default=ue,Object.defineProperty(e,"__esModule",{value:!0}),e}({},StackFrame,StackGenerator);
//# sourceMappingURL=index.min.js.map
